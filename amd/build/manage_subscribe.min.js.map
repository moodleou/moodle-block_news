{"version":3,"file":"manage_subscribe.min.js","sources":["../src/manage_subscribe.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript to manage news's subscribers page.\n *\n * @package block_news\n * @copyright 2021 The Open University\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\n/**\n * Manage news's subscribers page.\n *\n * @method  manageSubscribe\n * @param   {string}    stringSelectall      String selectall\n * @param   {string}    stringDeselectall    String delectall\n */\nexport const manageSubscribe = function (stringSelectall, stringDeselectall) {\n    let buttonsDiv = document.getElementById('block-news-buttons');\n\n    let selectAll = document.createElement('input');\n    selectAll.setAttribute('type', 'button');\n    selectAll.value = stringSelectall;\n    buttonsDiv.appendChild(selectAll);\n\n    let deselectAll = document.createElement('input');\n    deselectAll.setAttribute('type', 'button');\n    deselectAll.value = stringDeselectall;\n    buttonsDiv.appendChild(deselectAll);\n    let unsubscribe;\n    let inputs = document.querySelectorAll('#block-news-subscription-list input');\n    let all = [];\n    for (let i = 0; i < inputs.length; i++) {\n        let input = inputs.item(i);\n        if (input.name.indexOf('user') == 0) {\n            all.push(input);\n        }\n        if (input.name == 'unsubscribe') {\n            unsubscribe = input;\n        }\n    }\n    let update = () => {\n        let allSelected = true, noneSelected = true;\n        for (let i = 0; i < all.length; i++) {\n            if (all[i].checked) {\n                noneSelected = false;\n            } else {\n                allSelected = false;\n            }\n        }\n        selectAll.disabled = allSelected;\n        deselectAll.disabled = noneSelected;\n        unsubscribe.disabled = noneSelected;\n    };\n\n    update();\n\n    for (let i = 0; i < all.length; i++) {\n        all[i].addEventListener('click', () => update());\n    }\n\n    selectAll.addEventListener('click', () => {\n        for (let i = 0; i < all.length; i++) {\n            all[i].checked = true;\n        }\n        update();\n    })\n\n    deselectAll.addEventListener('click', () => {\n        for (let i = 0; i < all.length; i++) {\n            all[i].checked = false;\n        }\n        update();\n    })\n};\n"],"names":["stringSelectall","stringDeselectall","buttonsDiv","document","getElementById","selectAll","createElement","setAttribute","value","appendChild","unsubscribe","deselectAll","inputs","querySelectorAll","all","i","length","input","item","name","indexOf","push","update","allSelected","noneSelected","checked","disabled","addEventListener"],"mappings":"sLA+B+B,SAAUA,gBAAiBC,uBAClDC,WAAaC,SAASC,eAAe,sBAErCC,UAAYF,SAASG,cAAc,SACvCD,UAAUE,aAAa,OAAQ,UAC/BF,UAAUG,MAAQR,gBAClBE,WAAWO,YAAYJ,eAMnBK,YAJAC,YAAcR,SAASG,cAAc,SACzCK,YAAYJ,aAAa,OAAQ,UACjCI,YAAYH,MAAQP,kBACpBC,WAAWO,YAAYE,qBAEnBC,OAAST,SAASU,iBAAiB,uCACnCC,IAAM,GACDC,EAAI,EAAGA,EAAIH,OAAOI,OAAQD,IAAK,KAChCE,MAAQL,OAAOM,KAAKH,GACU,GAA9BE,MAAME,KAAKC,QAAQ,SACnBN,IAAIO,KAAKJ,OAEK,eAAdA,MAAME,OACNT,YAAcO,WAGlBK,OAAS,mBACLC,aAAc,EAAMC,cAAe,EAC9BT,GAAI,EAAGA,GAAID,IAAIE,OAAQD,KACxBD,IAAIC,IAAGU,QACPD,cAAe,EAEfD,aAAc,EAGtBlB,UAAUqB,SAAWH,YACrBZ,YAAYe,SAAWF,aACvBd,YAAYgB,SAAWF,cAG3BF,aAEK,IAAIP,IAAI,EAAGA,IAAID,IAAIE,OAAQD,MAC5BD,IAAIC,KAAGY,iBAAiB,SAAS,kBAAML,YAG3CjB,UAAUsB,iBAAiB,SAAS,eAC3B,IAAIZ,IAAI,EAAGA,IAAID,IAAIE,OAAQD,MAC5BD,IAAIC,KAAGU,SAAU,EAErBH,YAGJX,YAAYgB,iBAAiB,SAAS,eAC7B,IAAIZ,IAAI,EAAGA,IAAID,IAAIE,OAAQD,MAC5BD,IAAIC,KAAGU,SAAU,EAErBH"}