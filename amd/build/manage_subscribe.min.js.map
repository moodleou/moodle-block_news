{"version":3,"sources":["../src/manage_subscribe.js"],"names":["manageSubscribe","stringSelectall","stringDeselectall","buttonsDiv","document","getElementById","selectAll","createElement","setAttribute","value","appendChild","deselectAll","unsubscribe","inputs","querySelectorAll","all","i","input","length","item","name","indexOf","push","update","allSelected","noneSelected","checked","disabled","addEventListener"],"mappings":"2MAgC+B,QAAlBA,CAAAA,eAAkB,CAAUC,CAAV,CAA2BC,CAA3B,CAA8C,IACrEC,CAAAA,CAAU,CAAGC,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,CADwD,CAGrEC,CAAS,CAAGF,QAAQ,CAACG,aAAT,CAAuB,OAAvB,CAHyD,CAIzED,CAAS,CAACE,YAAV,CAAuB,MAAvB,CAA+B,QAA/B,EACAF,CAAS,CAACG,KAAV,CAAkBR,CAAlB,CACAE,CAAU,CAACO,WAAX,CAAuBJ,CAAvB,EAEA,GAAIK,CAAAA,CAAW,CAAGP,QAAQ,CAACG,aAAT,CAAuB,OAAvB,CAAlB,CACAI,CAAW,CAACH,YAAZ,CAAyB,MAAzB,CAAiC,QAAjC,EACAG,CAAW,CAACF,KAAZ,CAAoBP,CAApB,CACAC,CAAU,CAACO,WAAX,CAAuBC,CAAvB,EAIA,OAHIC,CAAAA,CAGJ,CAFIC,CAAM,CAAGT,QAAQ,CAACU,gBAAT,CAA0B,qCAA1B,CAEb,CADIC,CAAG,CAAG,EACV,CAASC,CAAC,CAAG,CAAb,CACQC,CADR,CAAgBD,CAAC,CAAGH,CAAM,CAACK,MAA3B,CAAmCF,CAAC,EAApC,CAAwC,CAChCC,CADgC,CACxBJ,CAAM,CAACM,IAAP,CAAYH,CAAZ,CADwB,CAEpC,GAAkC,CAA9B,EAAAC,CAAK,CAACG,IAAN,CAAWC,OAAX,CAAmB,MAAnB,CAAJ,CAAqC,CACjCN,CAAG,CAACO,IAAJ,CAASL,CAAT,CACH,CACD,GAAkB,aAAd,EAAAA,CAAK,CAACG,IAAV,CAAiC,CAC7BR,CAAW,CAAGK,CACjB,CACJ,CACD,GAAIM,CAAAA,CAAM,CAAG,UAAM,CAEf,OADIC,CAAAA,CAAW,GACf,CADwBC,CAAY,GACpC,CAAST,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,CAAG,CAACG,MAAxB,CAAgCF,CAAC,EAAjC,CAAqC,CACjC,GAAID,CAAG,CAACC,CAAD,CAAH,CAAOU,OAAX,CAAoB,CAChBD,CAAY,GACf,CAFD,IAEO,CACHD,CAAW,GACd,CACJ,CACDlB,CAAS,CAACqB,QAAV,CAAqBH,CAArB,CACAb,CAAW,CAACgB,QAAZ,CAAuBF,CAAvB,CACAb,CAAW,CAACe,QAAZ,CAAuBF,CAC1B,CAZD,CAcAF,CAAM,GAEN,IAAK,GAAIP,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,CAAG,CAACG,MAAxB,CAAgCF,CAAC,EAAjC,CAAqC,CACjCD,CAAG,CAACC,CAAD,CAAH,CAAOY,gBAAP,CAAwB,OAAxB,CAAiC,iBAAML,CAAAA,CAAM,EAAZ,CAAjC,CACH,CAEDjB,CAAS,CAACsB,gBAAV,CAA2B,OAA3B,CAAoC,UAAM,CACtC,IAAK,GAAIZ,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,CAAG,CAACG,MAAxB,CAAgCF,CAAC,EAAjC,CAAqC,CACjCD,CAAG,CAACC,CAAD,CAAH,CAAOU,OAAP,GACH,CACDH,CAAM,EACT,CALD,EAOAZ,CAAW,CAACiB,gBAAZ,CAA6B,OAA7B,CAAsC,UAAM,CACxC,IAAK,GAAIZ,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,CAAG,CAACG,MAAxB,CAAgCF,CAAC,EAAjC,CAAqC,CACjCD,CAAG,CAACC,CAAD,CAAH,CAAOU,OAAP,GACH,CACDH,CAAM,EACT,CALD,CAMH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * JavaScript to handle view page tour button.\r\n *\r\n * @package block_news\r\n * @copyright 2021 The Open University\r\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport {filterMatches} from 'tool_usertours/filter_cssselector';\r\n\r\n/**\r\n * Handle user tour button of OSEP theme.\r\n *\r\n * @method  manageSubscribe\r\n * @param   {string}    stringSelectall      String selectall\r\n * @param   {string}    stringDeselectall    String delectall\r\n */\r\nexport const manageSubscribe = function (stringSelectall, stringDeselectall) {\r\n    let buttonsDiv = document.getElementById('block-news-buttons');\r\n\r\n    let selectAll = document.createElement('input');\r\n    selectAll.setAttribute('type', 'button');\r\n    selectAll.value = stringSelectall;\r\n    buttonsDiv.appendChild(selectAll);\r\n\r\n    let deselectAll = document.createElement('input');\r\n    deselectAll.setAttribute('type', 'button');\r\n    deselectAll.value = stringDeselectall;\r\n    buttonsDiv.appendChild(deselectAll);\r\n    let unsubscribe;\r\n    let inputs = document.querySelectorAll('#block-news-subscription-list input');\r\n    let all = [];\r\n    for (let i = 0; i < inputs.length; i++) {\r\n        let input = inputs.item(i);\r\n        if (input.name.indexOf('user') == 0) {\r\n            all.push(input);\r\n        }\r\n        if (input.name == 'unsubscribe') {\r\n            unsubscribe = input;\r\n        }\r\n    }\r\n    let update = () => {\r\n        var allSelected = true, noneSelected = true;\r\n        for (let i = 0; i < all.length; i++) {\r\n            if (all[i].checked) {\r\n                noneSelected = false;\r\n            } else {\r\n                allSelected = false;\r\n            }\r\n        }\r\n        selectAll.disabled = allSelected;\r\n        deselectAll.disabled = noneSelected;\r\n        unsubscribe.disabled = noneSelected;\r\n    };\r\n\r\n    update();\r\n\r\n    for (var i = 0; i < all.length; i++) {\r\n        all[i].addEventListener('click', () => update());\r\n    }\r\n\r\n    selectAll.addEventListener('click', () => {\r\n        for (var i = 0; i < all.length; i++) {\r\n            all[i].checked = true;\r\n        }\r\n        update();\r\n    })\r\n\r\n    deselectAll.addEventListener('click', () => {\r\n        for (var i = 0; i < all.length; i++) {\r\n            all[i].checked = false;\r\n        }\r\n        update();\r\n    })\r\n};\r\n"],"file":"manage_subscribe.min.js"}